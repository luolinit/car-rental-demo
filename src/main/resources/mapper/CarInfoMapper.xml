<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.demo.dao.CarInfoMapper">


    <resultMap type="com.demo.dao.po.CarModelInfoPO" id="car_model_info_result">
        <result property="carModelId" column="car_model_id"/>
        <result property="carModelName" column="car_model_name"/>
        <result property="dailyRentPrice" column="daily_rent_price"/>
        <result property="storeAddress" column="store_address"/>
        <result property="storeName" column="store_name"/>
        <result property="storeWorkTime" column="store_work_time"/>
    </resultMap>

    <sql id ="car_model_info_column">
        car_model_id,car_model_name,daily_rent_price,store_address,store_name,store_work_time
    </sql>

    
    <select id="queryAllCarModelInfo" resultMap="car_model_info_result">
        SELECT
        <include refid="car_model_info_column" />
        FROM car_model_info
    </select>










    <resultMap type="com.demo.dao.po.CarInfoPO" id="car_info_result">
        <result property="carModelId" column="car_model_id"/>
        <result property="carNo" column="car_no"/>
    </resultMap>

    <sql id ="car_info_column">
        car_no,car_model_id
    </sql>

    <sql id ="query_sharing">
        <trim prefix="WHERE" prefixOverrides="AND|OR">
            1=1
            <if test="carNo!=null">
                AND car_no = #{carNo}
            </if>
            <if test="carModelId!=null">
                AND car_model_id = #{carModelId}
            </if>
        </trim>
    </sql>

    <select id="queryCarInfosByModel" resultMap="car_info_result">
        SELECT
        <include refid="car_info_column" />
        FROM car_info
        <include refid="query_sharing" />
    </select>






</mapper>